{% extends "base.html" %}

{% block title %}{{ artistas.artist_name }} - Music Ratings FN{% endblock %}

{% block content %}
<div class="container" style="margin-top: 2rem;">
    <div class="card" style="margin-bottom: 2rem;">
        <h1>{{ artistas.artist_name }}</h1>
        <p style="color: var(--spotify-light-gray);">
            {% if artistas.country %}{{ artistas.country }} Â· {% endif %}{{ artistas.genre or 'Sin genero definido' }}
        </p>
        {% if artistas.bio %}
        <p style="margin-top: 1rem;">{{ artistas.bio }}</p>
        {% endif %}
    </div>

    <section style="margin-bottom: 2rem;">
        <h2>Albumes</h2>
        {% if albumes %}
        <div class="album-grid">
            {% for album in albumes %}
            <a href="{{ url_for('album_detail', album_id=album.album_id) }}" class="album-card">
                <div class="album-cover"
                    style="display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                    ðŸŽµ
                </div>
                <div class="album-title">{{ album.album_title }}</div>
                <div class="album-rating">
                    <span class="stars">
                        {% set rating = (album.avg_rating or 0) | round | int %}
                        {% for i in range(rating) %}â˜…{% endfor %}
                        {% for i in range(5 - rating) %}â˜†{% endfor %}
                    </span>
                    <span style="color: var(--spotify-light-gray); font-size: 0.85rem;">
                        {{ "%.1f" | format(album.avg_rating or 0.0) }} ({{ album.rating_count or 0 }} ratings)
                    </span>
                </div>
            </a>
            {% endfor %}
        </div>
        {% else %}
        <p style="color: var(--spotify-light-gray);">Este artista todavia no tiene albumes registrados.</p>
        {% endif %}
    </section>

    <section>
        <h2>Canciones</h2>
        {% if canciones %}
        <div class="card">
            <div class="table-scroll">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="text-align: left; color: var(--spotify-light-gray); border-bottom: 1px solid var(--spotify-dark-gray);">
                        <th style="padding: 0.5rem;">Cancion</th>
                        <th style="padding: 0.5rem;">Album</th>
                        <th style="padding: 0.5rem; text-align: center;">Duracion</th>
                        <th style="padding: 0.5rem; text-align: center;">Rating</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cancion in canciones %}
                    <tr class="fade-in" style="border-bottom: 1px solid var(--spotify-dark-gray);">
                        <td style="padding: 0.5rem;">
                            <a href="{{ url_for('track_detail', track_id=cancion.track_id) }}">
                                {{ cancion.track_title }}
                            </a>
                        </td>
                        <td style="padding: 0.5rem;">
                            <a href="{{ url_for('album_detail', album_id=cancion.album_id) }}">
                                {{ cancion.album_title }}
                            </a>
                        </td>
                        <td style="padding: 0.5rem; text-align: center; color: var(--spotify-light-gray);">
                            {% if cancion.duration_seconds %}
                            {{ (cancion.duration_seconds // 60) }}:{{ "%02d" | format(cancion.duration_seconds % 60) }}
                            {% else %}
                            -
                            {% endif %}
                        </td>
                        <td style="padding: 0.5rem; text-align: center;">
                            <span class="stars">
                                {% set rating = (cancion.avg_rating or 0) | round | int %}
                                {% for i in range(rating) %}â˜…{% endfor %}
                                {% for i in range(5 - rating) %}â˜†{% endfor %}
                            </span>
                            <span style="color: var(--spotify-light-gray); font-size: 0.85rem;">
                                {{ "%.1f" | format(cancion.avg_rating or 0.0) }} ({{ cancion.rating_count or 0 }} votos)
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            </div>
        </div>
        {% else %}
        <p style="color: var(--spotify-light-gray);">Este artista todavia no tiene canciones registradas.</p>
        {% endif %}
    </section>
</div>
{% endblock %}


