{% extends "base.html" %}

{% block title %}Mejores Albumes - Music Ratings FN{% endblock %}

{% block content %}
<section class="hero">
    <div class="container">
        <h1>üèÜ Mejores Albumes</h1>
        <p>Los mas populares y mejor valorados por los usuarios.</p>
    </div>
</section>

<div class="container section-header">
    <div class="section-title-block">
        <h2>Albumes</h2>
    </div>
    <form class="filter-form" action="{{ url_for('search_albums_page') }}" method="get">
        <label>
            Buscar
            <input type="text" name="search" placeholder="Nombre del album o artista">
        </label>
        <label>
            Ordenar por
            <select name="order">
                <option value="rating">Rating</option>
                <option value="alfabetico">Alfabetico</option>
                <option value="fecha">Fecha</option>
            </select>
        </label>
        <label>
            Direccion
            <select name="direction">
                <option value="desc">Descendente</option>
                <option value="asc">Ascendente</option>
            </select>
        </label>
        <button class="btn btn-primary" type="submit">Ir al buscador</button>
    </form>
</div>

<div class="container">
    {% if albumes %}
        <div class="album-grid fade-in">
            {% for album in albumes %}
            <a href="{{ url_for('album_detail', album_id=album.album_id) }}" class="album-card">
                <div class="album-cover"
                    style="display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                    üéµ
                </div>

                <div class="album-title">{{ album.album_title }}</div>
                <div class="album-artist">{{ album.artist_name }}</div>

                <div class="album-rating">
                    <div class="stars">
                        {% set rating_round = (album.avg_rating or 0) | round | int %}
                        {% for i in range(rating_round) %}‚òÖ{% endfor %}
                        {% for i in range(5 - rating_round) %}‚òÜ{% endfor %}
                    </div>
                    <span class="album-rating-text">
                        {{ "%.1f" | format(album.avg_rating or 0.0) }} ({{ album.rating_count or 0 }} ratings)
                    </span>
                </div>
            </a>
            {% endfor %}
        </div>
    {% else %}
    <div class="text-center" style="padding: 3rem;">
        <h3>No hay albumes con canciones valoradas todavia</h3>
    </div>
    {% endif %}
</div>
{% endblock %}


